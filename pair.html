<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ADEEL-MD | Pair Your Number</title>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<!-- GSAP + Lottie -->
<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
<script src="https://unpkg.com/gsap@3/dist/TextPlugin.min.js"></script>
<script src="https://unpkg.com/lottie-web/build/player/lottie.min.js"></script>

<style>
  :root{
    --bg:#0b1220;
    --panel:#0f1b2e;
    --panel-2:#0d1627;
    --primary:#7c5cff;
    --accent:#28e0b9;
    --text:#dbe6ff;
    --muted:#8aa0c6;
    --danger:#ff4d6d;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial;
    color:var(--text);
    background:
      radial-gradient(1200px 600px at 20% -10%, rgba(124,92,255,.2), transparent 60%),
      radial-gradient(900px 500px at 100% 20%, rgba(40,224,185,.15), transparent 60%),
      linear-gradient(180deg, #0b1220 0%, #060a14 100%);
    overflow-x:hidden;
  }

  /* Header */
  .topbar{
    display:flex;align-items:center;justify-content:space-between;
    padding:18px 22px;position:sticky;top:0;z-index:5;
    background:linear-gradient(180deg, rgba(11,18,32,.95) 60%, rgba(11,18,32,0));
    backdrop-filter:saturate(140%) blur(6px);
    border-bottom:1px solid rgba(124,92,255,.15);
  }
  .brand{font-weight:800;letter-spacing:.4px}
  .brand .dot{color:var(--primary)}
  .links a{color:var(--muted);text-decoration:none;margin-left:16px}
  .links a:hover{color:var(--text)}

  /* Layout */
  .wrap{
    display:grid;grid-template-columns: 1.1fr .9fr;gap:24px;
    max-width:1100px;margin:32px auto;padding:0 16px;
  }
  @media (max-width: 900px){
    .wrap{grid-template-columns:1fr}
  }

  .panel{
    background:linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
    border:1px solid rgba(124,92,255,.15);
    border-radius:22px;padding:22px;
    box-shadow:0 20px 60px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
  }

  /* Girl / Hero */
  .hero{
    position:relative;height:440px;display:flex;align-items:flex-end;justify-content:center;
    border-radius:22px;overflow:hidden;background:
      radial-gradient(800px 300px at 70% 0%, rgba(124,92,255,.22), transparent 60%),
      linear-gradient(180deg, #0e1a2c 0%, #0a1322 100%);
  }
  .hero img{
    width:auto;height:100%;object-fit:contain;filter:drop-shadow(0 10px 40px rgba(124,92,255,.35));
    transform:translateY(8px);
  }
  .speech{
    position:absolute;left:18px;top:18px;max-width:78%;
    background:rgba(8,13,25,.75);border:1px solid rgba(124,92,255,.35);
    padding:14px 16px;border-radius:14px;font-weight:600;line-height:1.35;
    box-shadow:0 10px 30px rgba(0,0,0,.25);
  }
  .speech small{display:block;color:var(--muted);font-weight:500;margin-top:4px}

  /* Form */
  .form h2{margin:0 0 10px;font-weight:800}
  .tip{color:var(--muted);font-size:.95rem;margin-bottom:16px}
  .input{
    display:flex;gap:10px
  }
  input[type="tel"]{
    flex:1;background:#0a1425;border:1px solid rgba(124,92,255,.25);
    color:var(--text);padding:14px 14px;border-radius:14px;font-size:16px;outline:none;
    transition:border .2s, box-shadow .2s;
  }
  input[type="tel"]:focus{
    border-color:var(--primary);
    box-shadow:0 0 0 4px rgba(124,92,255,.14);
  }
  button{
    background:linear-gradient(180deg, var(--primary), #6042ff);
    color:white;border:none;padding:14px 16px;border-radius:14px;
    font-weight:700;cursor:pointer;min-width:120px;
    box-shadow:0 10px 25px rgba(124,92,255,.35);
    transition:transform .06s ease, box-shadow .2s ease, filter .2s;
  }
  button:hover{filter:brightness(1.05)}
  button:active{transform:translateY(1px)}
  .note{
    margin-top:14px;font-size:.93rem;color:var(--muted)
  }

  /* Code card */
  .codeCard{
    margin-top:18px;padding:16px;border-radius:16px;
    background:#0a1425;border:1px dashed rgba(40,224,185,.45)
  }
  .code{
    font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size:20px;letter-spacing:2px
  }

  /* Overlay animation */
  .overlay{
    position:fixed;inset:0;background:rgba(6,10,20,.85);
    display:none;align-items:center;justify-content:center;z-index:50;
    backdrop-filter: blur(4px);
  }
  .overlay.active{display:flex}
  .animBox{
    width:min(560px, 90vw);height:min(560px, 90vw);
  }

  /* Toasts */
  .toast{
    position:fixed;bottom:22px;left:50%;transform:translateX(-50%);
    background:#0a1425;border:1px solid rgba(124,92,255,.25);
    padding:10px 14px;border-radius:12px;display:none;z-index:60
  }
  .toast.show{display:block}
  .muted{color:var(--muted)}
</style>
</head>
<body>

<header class="topbar">
  <div class="brand">ADEEL<span class="dot">-</span>MD</div>
  <div class="links">
    <a href="https://github.com/prince009here/ADEEL-MD" target="_blank" rel="noopener">GitHub</a>
    <a href="https://whatsapp.com/channel/0029Vb6HUGv0G0XmD5RKrA3G" target="_blank" rel="noopener">Channel</a>
  </div>
</header>

<div class="wrap">

  <!-- Left: Anime girl + speech -->
  <section class="panel hero">
    <!-- Replace this image with your own in /public/images/anime-girl.png -->
    <img src="/images/anime-girl.png" alt="Anime Girl Assistant" id="girl" />

    <div class="speech" id="speech">
      Welcome! Iâ€™m your pairing assistant ðŸ’œ<small>Tap the number box to begin.</small>
    </div>
  </section>

  <!-- Right: Form -->
  <section class="panel form">
    <h2>Pair your WhatsApp</h2>
    <div class="tip">Enter your phone number with country code (e.g. <b>+92xxxxxxxxxx</b>)</div>

    <div class="input">
      <input id="number" type="tel" placeholder="+92XXXXXXXXXX" autocomplete="tel" inputmode="tel" />
      <button id="pairBtn">Get Code</button>
    </div>
    <div class="note">Weâ€™ll generate a secure code and DM it to you from <b>ADEEL-MD</b>. Never share your session.</div>

    <div id="result" class="codeCard" style="display:none">
      <div class="muted">Your pairing code</div>
      <div class="code" id="codeValue">â€”</div>
    </div>
  </section>

</div>

<!-- Overlay Lottie animation -->
<div class="overlay" id="overlay">
  <div class="animBox" id="lottieBox"></div>
</div>

<!-- Toast -->
<div class="toast" id="toast">Copied!</div>

<!-- Sounds (place files in /public/sounds/) -->
<audio id="sndWelcome" src="/sounds/welcome.mp3" preload="auto"></audio>
<audio id="sndFocus"   src="/sounds/focus.mp3"   preload="auto"></audio>
<audio id="sndClick"   src="/sounds/click.mp3"   preload="auto"></audio>
<audio id="sndSuccess" src="/sounds/success.mp3" preload="auto"></audio>
<audio id="sndCelebrate" src="/sounds/celebrate.mp3" preload="auto"></audio>

<script>
  // Config
  const API = '/code';
  const CHANNEL_JID = '0029Vb6HUGv0G0XmD5RKrA3G@newsletter';

  // Elements
  const numberEl = document.getElementById('number');
  const pairBtn  = document.getElementById('pairBtn');
  const speech   = document.getElementById('speech');
  const overlay  = document.getElementById('overlay');
  const codeCard = document.getElementById('result');
  const codeVal  = document.getElementById('codeValue');
  const toast    = document.getElementById('toast');

  // Sounds
  const sWelcome   = document.getElementById('sndWelcome');
  const sFocus     = document.getElementById('sndFocus');
  const sClick     = document.getElementById('sndClick');
  const sSuccess   = document.getElementById('sndSuccess');
  const sCelebrate = document.getElementById('sndCelebrate');

  // Lottie setup
  const lottieAnim = lottie.loadAnimation({
    container: document.getElementById('lottieBox'),
    renderer: 'svg',
    loop: true,
    autoplay: false,
    // Put your .json file in /public/lottie/pairing.json
    path: '/lottie/pairing.json'
  });

  // Helpers
  function say(text, sub=''){
    gsap.to(speech, {duration:.2, opacity:0, y:-6, onComplete(){
      speech.innerHTML = text + (sub ? `<small>${sub}</small>` : '');
      gsap.to(speech, {duration:.35, opacity:1, y:0, ease:'power2.out'});
    }});
  }
  function showToast(msg){
    toast.textContent = msg || 'Done';
    toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'), 1200);
  }
  function showOverlay(active){
    overlay.classList.toggle('active', !!active);
    active ? lottieAnim.play() : lottieAnim.stop();
  }
  function copyToClipboard(text){
    navigator.clipboard?.writeText(text).then(()=>showToast('Copied'));
  }

  // Initial welcome (slight delay for dramatic entry)
  setTimeout(()=>{
    sWelcome.play().catch(()=>{});
    say('Salam! Iâ€™m Adeel-chan, your pairing guide âœ¨','Enter your number with country code.');
  }, 450);

  // Focus guidance
  numberEl.addEventListener('focus', ()=>{
    sFocus.play().catch(()=>{});
    say('Type your number like +92XXXXXXXXXX','Iâ€™ll create a secure code for you.');
  });

  // Button click -> animation + request
  pairBtn.addEventListener('click', async ()=>{
    const num = numberEl.value.trim();
    if(!num){
      say('Number is empty ðŸ˜¿','Please enter with country code.');
      gsap.from(numberEl, {duration:.2, x:-6, repeat:3